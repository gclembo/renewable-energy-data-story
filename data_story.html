<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Carter Lembo">
<meta name="dcterms.date" content="2024-12-04">

<title>We Need More than Renewables</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="data_story_files/libs/clipboard/clipboard.min.js"></script>
<script src="data_story_files/libs/quarto-html/quarto.js"></script>
<script src="data_story_files/libs/quarto-html/popper.min.js"></script>
<script src="data_story_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="data_story_files/libs/quarto-html/anchor.min.js"></script>
<link href="data_story_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data_story_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="data_story_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="data_story_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="data_story_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#we-have-a-problem" id="toc-we-have-a-problem" class="nav-link active" data-scroll-target="#we-have-a-problem">We Have a Problem</a></li>
  <li><a href="#generating-power" id="toc-generating-power" class="nav-link" data-scroll-target="#generating-power">Generating Power</a>
  <ul class="collapse">
  <li><a href="#case-study-iowa" id="toc-case-study-iowa" class="nav-link" data-scroll-target="#case-study-iowa">Case study: Iowa</a></li>
  <li><a href="#case-study-idaho" id="toc-case-study-idaho" class="nav-link" data-scroll-target="#case-study-idaho">Case study: Idaho</a></li>
  </ul></li>
  <li><a href="#more-problems" id="toc-more-problems" class="nav-link" data-scroll-target="#more-problems">More Problems</a></li>
  <li><a href="#why-nuclear" id="toc-why-nuclear" class="nav-link" data-scroll-target="#why-nuclear">Why Nuclear?</a>
  <ul class="collapse">
  <li><a href="#low-emissions" id="toc-low-emissions" class="nav-link" data-scroll-target="#low-emissions">Low emissions</a></li>
  <li><a href="#safety" id="toc-safety" class="nav-link" data-scroll-target="#safety">Safety</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">We Need More than Renewables</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Carter Lembo </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 4, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="we-have-a-problem" class="level2">
<h2 class="anchored" data-anchor-id="we-have-a-problem">We Have a Problem</h2>
<p>Humanity has a problem. Greenhouse gas levels in Earth’s atmosphere have been increasing in past decades and impacting the global climate. The most prevalent of these gases is carbon dioxide. The levels of carbon dioxide in the atmosphere have increased from around 315.98 parts per million in 1959 to around 421.08 parts per million in 2023 (Lan, n.d.). That’s about a 33% increase. This worrying trend can be seen in <a href="#fig-yearly-co2">Figure&nbsp;1</a> below with data by the National Oceanic and Atmospheric Administration (NOAA) from the well known Mauna Loa Observatory.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-yearly-co2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-yearly-co2-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;1: The concentration of global carbon dioxide in the atmosphere has been increasing signifcantly in recent decades from 315.98 ppm in 1959 to 421.08 ppm in 2023.</figcaption>
</figure>
</div>
</div>
</div>
<p>As their name suggests, greenhouse gases trap energy emitted from the sun on earth, similar to how energy gets trapped inside a greenhouse and heating the interior. This additional energy leads to warming but it also contributes to more intense weather and climate events. The United States is already feeling these effects of climate change. Before 2000, the number of billion dollar weather and climate disasters in the US was relatively low and stable. By 2023 however the number of billion dollar disasters was 28. In 2000 it was only 5 (“Billion-dollar weather and climate disasters,” 2024). It is obvious that the number of major disasters such as these has been increasing. This trend can be easily seen in <a href="#fig-disasters">Figure&nbsp;2</a> below with data from NOAA.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-disasters" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-disasters-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;2: The number of billion dollar weather and climate disasters was relatively low and stable around 5 from 1980 to 2000 but increased after 2000 to 28 billion dollar disasters in 2023.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="generating-power" class="level2">
<h2 class="anchored" data-anchor-id="generating-power">Generating Power</h2>
<p>This trend will likely continue as the climate crisis develops further. Because of the increasing dangers posed by climate change, people have been theorizing new ways to reduce greenhouse gas emissions. One area in which this has been a major focus is electricity production. In the United States, electricity production accounts for around 24.87% of greenhouse gas emissions in 2022 (“Greenhouse Gas Inventory Data Explorer,” 2023). This is the second largest portion behind transportation. The full breakdown can be seen in <a href="#fig-us-industry-emissions">Figure&nbsp;3</a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-us-industry-emissions" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-us-industry-emissions-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Electric power is the second largest industry in greenhouse gas emissions accounting for 24.87% of US greenhouse gas emissions just under transportation which accounts for 28.4% of emissions.</figcaption>
</figure>
</div>
</div>
</div>
<p>Because of this, reducing emissions during electricity production is a significant step toward climate sustainability. In the US, there have been efforts to reduce electricity emissions. Energy sources such as coal are on the decline while the usage of natural gas and renewables has been increasing (“Electricity Data Browser,” n.d.). This can be seen in <a href="#fig-us-energy-sources">Figure&nbsp;4</a>. While natural gas is not a clean energy source, it has significantly less emissions than coal. For each gigajoule of energy produced, coal emits around 101 kg of carbon dioxide while natural gas only emits around 56 kg (“Carbon emissions of different fuels,” 2024). These efforts have been somewhat effective as greenhouse gas emissions for electricity production have been decreasing in recent years (“Greenhouse Gas Inventory Data Explorer,” 2023). This effect can be seen in <a href="#fig-us-ghg-electricity">Figure&nbsp;5</a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-us-energy-sources" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-us-energy-sources-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;4: In recent years, the US has been decreasing its use of coal and increasing its use of natural gas and renewables such as wind and solar for electricity generation.</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-us-ghg-electricity" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-us-ghg-electricity-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;5: Greenhouse gas emissions per unit of electricity produced have been decreasing in the US from 2001 to 2023.</figcaption>
</figure>
</div>
</div>
</div>
<section id="case-study-iowa" class="level3">
<h3 class="anchored" data-anchor-id="case-study-iowa">Case study: Iowa</h3>
<p>One state that has significantly increased its use of green energy is Iowa. For years coal was a major source of energy in the state. However the use of wind to produce electricity grew dramatically and in 2019, more energy was being produced by wind than by coal. In 2023, 41,439 thousand megawatt hours of electricity was produced by wind, over twice the 16,414 thousand megawatt hours produced by coal (“Electricity Data Browser,” n.d.). This helped to cut electricity generation emissions significantly. As seen in <a href="#fig-ia-ghg-electricity">Figure&nbsp;6</a>, in 2001, Iowa was producing 2.94 million metric tons of carbon dioxide equivalent per kilowatt hour but by 2022 it was down to only 1.62 (“Greenhouse Gas Inventory Data Explorer,” 2023). Renewables were able to make Iowa’s electricity generation more greenhouse gas efficient.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-ia-ghg-electricity" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-ia-ghg-electricity-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Iowa has significantly decreased its greenhouse gas emissions from 2.94 million metric tons of carbon dioxide equivalent per kilowatt hour in 2001 to 1.62 in 2023.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="case-study-idaho" class="level3">
<h3 class="anchored" data-anchor-id="case-study-idaho">Case study: Idaho</h3>
<p>Idaho on the other hand has significantly increased its greenhouse gas emissions. Has been less successful at reducing greenhouse gas emissions from electricity generation. In 2001, Idaho was producing 3.22 million metric tons of carbon dioxide equivalent per kilowatt hour which is more than Iowa. It decreased a decent amount by 2011 but has increased to around 2.36 in 2023 (“Greenhouse Gas Inventory Data Explorer,” 2023). This trend can be seen in <a href="#fig-id-ghg-electricity">Figure&nbsp;7</a>. Why is it that Iowa was able to decrease its greenhouse gas emissions so much compared to Idaho? Idaho does not use much coal, a significant amount of its energy production is from hydroelectric power, and it has been increasing production of other renewables. The issue comes from the fact that the amount of natural gas usage has been increasing (“Electricity Data Browser,” n.d.). The increasing use of natural gas has stunted Idaho’s potential in reducing greenhouse gas emissions.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-id-ghg-electricity" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-id-ghg-electricity-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;7: After an initial decrease from 3.22 million metric tons of carbon dioxide equivalent per kilowatt hour, Idaho’s greenhouse gas emissions have stayed relatively the same after 2011 and even have risen slightly in 2023 to about 2.36.</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="more-problems" class="level2">
<h2 class="anchored" data-anchor-id="more-problems">More Problems</h2>
<p>States have been reducing carbon emissions by switching from coal to natural gas, but this is nowhere near a solution. Many have been incorporating more renewable energy into the power grid as well. However, while it would be great for every state to just start using renewable energy and stop using coal or natural gas, this isn’t completely realistic. Not every state has easy access to clean energy sources. Iowa was able to lower greenhouse gas emissions from electricity production because it increased its use of wind energy. While this is an impressive result, not every state just has access to these natural resources. On top of that, renewables such as solar and wind are not always available and cannot be controlled to meet daily or seasonal fluctuations in demand.</p>
</section>
<section id="why-nuclear" class="level2">
<h2 class="anchored" data-anchor-id="why-nuclear">Why Nuclear?</h2>
<p>The electrical grid needs to be able to have power when it needs it. Wind and solar only generate power when there is wind or there is sun. At the moment, the solution to this problem is to use sources that give more control. This can be hydroelectric power if it is available but oftentimes fossil fuels are being used. This solves the electricity demand problem, but it leads to the majority of carbon emissions from electricity production. Nuclear energy is an alternative that would solve all of these problems. It can be controlled to produce power when power is needed, it has a low carbon footprint, and on top of that, it is safe.</p>
<section id="low-emissions" class="level3">
<h3 class="anchored" data-anchor-id="low-emissions">Low emissions</h3>
<p>Nuclear power generation has surprisingly low greenhouse gas emissions. Looking at the amount of greenhouse gas emissions by electricity source in <a href="#fig-energy-source-emissions">Figure&nbsp;8</a>, in terms of grams of carbon dioxide equivalent per kilowatt hour, wind, solar, and hydroelectric are at 13, 43, and 21 respectively whereas nuclear is at a comparable 13 (Nicholson &amp; Heath, 2023). This demonstrates that nuclear has competitive greenhouse gas emission rates compared to other clear energy sources. In fact it even seems to be on the lower end of the spectrum.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-energy-source-emissions" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-energy-source-emissions-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;8: This bar chart demonstrates how nuclear energy has low emissions even compared to renewables such as wind and solar.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="safety" class="level3">
<h3 class="anchored" data-anchor-id="safety">Safety</h3>
<p>One of the reasons the general public is resistant to widespread use of nuclear power is the fear that it is unsafe. This fear is perpetuated by popular media portrayals of nuclear energy as well as real disasters that have occured. In general however, nuclear power is extremely safe and major disasters are rare. Additionally, in the United States there has never been a major nuclear disaster. Even the infamous three mile island had “no detectable health effects on plant workers or the public” (“Backgrounder on the Three Mile Island accident,” 2024). In fact, there are currently plans to make the site operational again (Mandler, 2024).</p>
<p>To see just how safe nuclear power is compared to other energy sources, let’s look at the deaths caused by each energy source, normalized by the amount of electricity produced by each source. The worldwide number of deaths per terawatt hour for solar, wind, and hydro are 0.02, 0.04, and 1.3 respectively. For nuclear, even including major disasters such as Chernobyl and Fukushima, it is only 0.03, less than that of hydro and comparable to wind and solar. If nuclear power is considered scary and unsafe, then why not wind and solar as well? Even if this has not been convincing, it is important to remember most of the power in the US is produced by fossil fuels. The 0.03 deaths per terawatt hour from nuclear pales in comparison to natural gas and coal which have death rates of 2.82 and 24.62 respectively (Tiseo, 2023). This seperation of scale can be seen clearly in <a href="#fig-energy-source-mortality">Figure&nbsp;9</a> If the idea of nuclear energy is scary then the fact that about 60% of energy in the US is produced by fossil fuels should be terrifying (“Electricity explained,” 2024). Even natural gas, the safer of these two main fossil fuels, is 94 times more deadly than nuclear.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-energy-source-mortality" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_story_files/figure-html/fig-energy-source-mortality-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;9: This bar chart shows that the mortality rate for nuclear power is similar to that of renewables such as solar and wind, and is significantly lower than that of fossil fuels.</figcaption>
</figure>
</div>
</div>
</div>
<p>By not converting to nuclear power, people will die. In 2023, around 4.18 thousand terawatt hours of electricity were produced. 16.2% of that was by coal and 43.1% was natural gas (“Electricity explained,” 2024). Doing the math, approximately 21,752 people died in one year because of the use of fossil fuels to produce electricity in the US. If the same energy was produced by nuclear instead we would expect around only 74 deaths. Nuclear is orders of magnitude safer than the current system of energy production.</p>
<p>While the United States does use a significant amount of nuclear power, the usage of nuclear power has been stagnating for years. The only way for it to fix the issues proposed is if people choose to implement nuclear electricity generation. Climate change is a complicated issue and there are many challenges that must be overcome to defeat it. One of these challenges is how the United States will generate electricity without significant greenhouse gas emissions. Renewable energy sources have been growing in scale in order to address this issue, however they have limitations. I hope it is clear that there is strong evidence that nuclear energy production will help solve the problem of clean energy generation, especially when renewable energy sources fall short. On top of that it is safe and would help save tens of thousands of lives every year in the United States by replacing fossil fuels which are a far greater danger.</p>
</section>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<p><em>Backgrounder on the Three Mile Island accident</em>. NRC Web. (2024, March 28). https://www.nrc.gov/reading-rm/doc-collections/fact-sheets/3mile-isle.html#tmiview</p>
<p><em>Carbon emissions of different fuels</em>. Forest Research. (2024, April 30). https://www.forestresearch.gov.uk/tools-and-resources/fthr/biomass-energy-resources/reference-biomass/facts-figures/carbon-emissions-of-different-fuels/</p>
<p>Environmental Protection Agency. (2023, August 18). <em>Greenhouse Gas Inventory Data Explorer</em>. EPA. https://cfpub.epa.gov/ghgdata/inventoryexplorer</p>
<p>Lan, X. (n.d.). <em>Trends in CO2 - NOAA Global Monitoring Laboratory</em>. GML. https://gml.noaa.gov/ccgg/trends/data.html</p>
<p>Mandler, C. (2024, September 20). <em>Three mile island nuclear plant will reopen to power Microsoft Data Centers</em>. NPR. https://www.npr.org/2024/09/20/nx-s1-5120581/three-mile-island-nuclear-power-plant-microsoft-ai</p>
<p>Nicholson, S., &amp; Heath, G. (2023, December 12). <em>Life cycle emissions factors for Electricity Generation Technologies</em>. Life Cycle Emissions Factors for Electricity Generation Technologies | NREL Data Catalog. https://data.nrel.gov/submissions/171</p>
<p>NOAA National Centers for Environmental Information (NCEI). (2024). <em>Billion-dollar weather and climate disasters</em>. Billion-Dollar Weather and Climate Disasters | National Centers for Environmental Information (NCEI). https://www.ncei.noaa.gov/access/billions/time-series/US/cost</p>
<p>Tiseo, I. (2023, September 12). <em>Global deaths per energy source</em>. Statista. https://www.statista.com/statistics/494425/death-rate-worldwide-by-energy-source/</p>
<p>U.S. Energy Information Administration. (2024, March 26). <em>Electricity explained</em>. Electricity in the U.S. - U.S. Energy Information Administration (EIA). https://www.eia.gov/energyexplained/electricity/electricity-in-the-us.php</p>
<p>U.S. Energy Information Administration. (n.d.). <em>Electricity Data Browser</em>. Electricity Data Browser - U.S. Energy Information Administration (EIA). https://www.eia.gov/electricity/data/browser/</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>